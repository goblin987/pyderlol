<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Breaking Bad - Heisenberg's Lab</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* ═══════════════════════════════════════════════════════════════
           V11 - ULTIMATE BREAKING BAD EXPERIENCE
           All Features: Film Grain, Vignette, Parallax, Glassmorphism,
           3D Tilt, Particles, Sound Design, Lab Gauges
           ═══════════════════════════════════════════════════════════════ */
        
        :root {
            --hazmat-yellow: #F5C518;
            --hazmat-yellow-dark: #C9A000;
            --crystal-blue: #00B4D8;
            --crystal-blue-glow: rgba(0, 180, 216, 0.5);
            --lab-green: #2ECC71;
            --money-green: #27AE60;
            --danger-red: #E74C3C;
            --warning-orange: #F39C12;
            --toxic-green: #C4E538;
            --bg-dark: #0a0a0a;
            --bg-surface: #141414;
            --bg-elevated: #1a1a1a;
            --bg-card: #222;
            --text-primary: #f0f0f0;
            --text-secondary: #a0a0a0;
            --text-muted: #666;
            --nav-height: 70px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; overflow: hidden; }
        
        body {
            font-family: 'Roboto Condensed', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            user-select: none;
        }

        .hidden { display: none !important; }

        /* ═══════════════════════════════════════════════════════════════
           FILM GRAIN OVERLAY
           ═══════════════════════════════════════════════════════════════ */
        .film-grain {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0.04;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
            animation: grain 0.5s steps(10) infinite;
        }
        @keyframes grain {
            0%, 100% { transform: translate(0, 0); }
            20% { transform: translate(-2%, -2%); }
            40% { transform: translate(2%, 2%); }
            60% { transform: translate(-2%, 2%); }
            80% { transform: translate(2%, -2%); }
        }

        /* ═══════════════════════════════════════════════════════════════
           VIGNETTE OVERLAY
           ═══════════════════════════════════════════════════════════════ */
        .vignette {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: 9998;
            background: radial-gradient(ellipse at center, 
                transparent 40%, 
                rgba(0, 0, 0, 0.4) 80%, 
                rgba(0, 0, 0, 0.7) 100%);
        }

        /* ═══════════════════════════════════════════════════════════════
           PARALLAX BACKGROUND
           ═══════════════════════════════════════════════════════════════ */
        .parallax-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            overflow: hidden;
            z-index: 0;
            background: linear-gradient(180deg, #0a1a0a 0%, #0a0a0a 50%, #050505 100%);
        }

        .parallax-layer {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            will-change: transform;
        }

        .smoke-deep {
            background: 
                radial-gradient(ellipse 100% 60% at 30% 90%, rgba(46, 204, 113, 0.1) 0%, transparent 60%),
                radial-gradient(ellipse 80% 50% at 80% 20%, rgba(46, 204, 113, 0.08) 0%, transparent 50%);
            animation: smokeDeep 25s ease-in-out infinite;
        }
        @keyframes smokeDeep {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-30px, -20px) scale(1.1); }
        }

        .chem-particles {
            background-image: 
                radial-gradient(2px 2px at 10% 20%, rgba(0, 180, 216, 0.5), transparent),
                radial-gradient(3px 3px at 30% 50%, rgba(46, 204, 113, 0.4), transparent),
                radial-gradient(2px 2px at 60% 30%, rgba(245, 197, 24, 0.3), transparent),
                radial-gradient(2px 2px at 80% 70%, rgba(0, 180, 216, 0.4), transparent),
                radial-gradient(3px 3px at 15% 80%, rgba(46, 204, 113, 0.3), transparent),
                radial-gradient(2px 2px at 90% 15%, rgba(46, 204, 113, 0.4), transparent);
            animation: particlesFloat 20s ease-in-out infinite;
        }
        @keyframes particlesFloat {
            0%, 100% { transform: translate(0, 0); }
            33% { transform: translate(10px, -15px); }
            66% { transform: translate(-10px, 10px); }
        }

        .smoke-wisps { overflow: hidden; }
        .smoke-wisp {
            position: absolute;
            width: 250px; height: 250px;
            background: radial-gradient(ellipse at center, rgba(46, 204, 113, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            filter: blur(40px);
        }
        .smoke-wisp:nth-child(1) { left: -80px; bottom: -80px; animation: wisp1 15s ease-in-out infinite; }
        .smoke-wisp:nth-child(2) { right: -60px; top: 10%; width: 200px; height: 200px; animation: wisp2 18s ease-in-out infinite; }
        .smoke-wisp:nth-child(3) { left: 40%; top: -60px; width: 180px; height: 180px; animation: wisp3 12s ease-in-out infinite; }
        @keyframes wisp1 { 0%, 100% { transform: translate(0, 0); opacity: 0.7; } 50% { transform: translate(60px, -100px); opacity: 0.3; } }
        @keyframes wisp2 { 0%, 100% { transform: translate(0, 0); opacity: 0.5; } 50% { transform: translate(-40px, 60px); opacity: 0.2; } }
        @keyframes wisp3 { 0%, 100% { transform: translate(0, 0); opacity: 0.6; } 50% { transform: translate(50px, 80px); opacity: 0.2; } }

        /* Rising bubbles */
        .bubbles-layer { position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; overflow: hidden; }
        .bubble {
            position: absolute;
            bottom: -20px;
            background: radial-gradient(circle at 30% 30%, rgba(46, 204, 113, 0.5), transparent 70%);
            border-radius: 50%;
            animation: bubbleUp 6s ease-in infinite;
        }
        .bubble:nth-child(1) { left: 8%; width: 8px; height: 8px; animation-delay: 0s; }
        .bubble:nth-child(2) { left: 22%; width: 6px; height: 6px; animation-delay: 1s; animation-duration: 5s; }
        .bubble:nth-child(3) { left: 38%; width: 10px; height: 10px; animation-delay: 2s; animation-duration: 7s; }
        .bubble:nth-child(4) { left: 52%; width: 5px; height: 5px; animation-delay: 0.5s; animation-duration: 5.5s; }
        .bubble:nth-child(5) { left: 68%; width: 7px; height: 7px; animation-delay: 1.5s; }
        .bubble:nth-child(6) { left: 82%; width: 9px; height: 9px; animation-delay: 2.5s; animation-duration: 6.5s; }
        @keyframes bubbleUp {
            0% { transform: translateY(0) scale(1); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.3; }
            100% { transform: translateY(-500px) scale(0.5); opacity: 0; }
        }

        /* ═══════════════════════════════════════════════════════════════
           INTRO SEQUENCE
           ═══════════════════════════════════════════════════════════════ */
        .intro-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(180deg, #0a1a0a 0%, #080808 100%);
            z-index: 10000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .intro-smoke-bg {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                radial-gradient(ellipse 120% 80% at 50% 120%, rgba(46, 204, 113, 0.2) 0%, transparent 60%);
            animation: introSmoke 8s ease-in-out infinite;
        }
        @keyframes introSmoke { 0%, 100% { opacity: 0.6; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); } }

        .intro-formulas {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
        }
        .formula {
            position: absolute;
            font-family: 'JetBrains Mono', monospace;
            color: rgba(46, 204, 113, 0.4);
            text-shadow: 0 0 10px rgba(46, 204, 113, 0.3);
            animation: formulaFloat 10s ease-in-out infinite;
        }
        .formula:nth-child(1) { top: 12%; left: 8%; font-size: 1em; animation-delay: 0s; }
        .formula:nth-child(2) { top: 25%; right: 12%; font-size: 0.85em; animation-delay: 1.5s; }
        .formula:nth-child(3) { top: 55%; left: 5%; font-size: 0.9em; animation-delay: 0.8s; }
        .formula:nth-child(4) { top: 70%; right: 8%; font-size: 1.1em; animation-delay: 2s; }
        .formula:nth-child(5) { top: 38%; left: 75%; font-size: 0.8em; animation-delay: 1s; }
        .formula:nth-child(6) { top: 85%; left: 45%; font-size: 0.9em; animation-delay: 2.5s; }
        @keyframes formulaFloat {
            0%, 100% { opacity: 0.3; transform: translateY(0) rotate(0deg); }
            50% { opacity: 0.6; transform: translateY(-15px) rotate(3deg); }
        }

        .intro-logo {
            display: flex;
            gap: 6px;
            margin-bottom: 30px;
            animation: logoReveal 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) 0.5s both;
        }
        @keyframes logoReveal {
            0% { opacity: 0; transform: scale(0.5) rotateY(90deg); }
            100% { opacity: 1; transform: scale(1) rotateY(0deg); }
        }

        .periodic-el {
            width: 85px; height: 95px;
            background: linear-gradient(160deg, #2a402a 0%, #1a2a1a 100%);
            border: 2px solid #3a5a3a;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 0 40px rgba(46, 204, 113, 0.4), inset 0 1px 0 rgba(255,255,255,0.1);
        }
        .periodic-el .num {
            position: absolute;
            top: 6px; left: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7em;
            color: rgba(255,255,255,0.5);
        }
        .periodic-el .sym {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 3em;
            line-height: 1;
        }
        .periodic-el.br .sym { color: #A52A2A; text-shadow: 0 0 20px rgba(165, 42, 42, 0.6); }
        .periodic-el.ba .sym { color: #2ECC71; text-shadow: 0 0 20px rgba(46, 204, 113, 0.6); }
        .periodic-el .name {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 0.6em;
            color: rgba(255,255,255,0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .intro-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.2em;
            color: #f0f0f0;
            letter-spacing: 10px;
            text-shadow: 0 0 30px rgba(255,255,255,0.2);
            animation: titleFade 1s ease 1.2s both;
        }
        .intro-quote {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1em;
            color: rgba(255,255,255,0.5);
            font-style: italic;
            margin-top: 10px;
            animation: titleFade 1s ease 1.5s both;
        }
        @keyframes titleFade { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        .intro-loader {
            margin-top: 40px;
            text-align: center;
            animation: titleFade 1s ease 1.8s both;
        }
        .loader-bar {
            width: 180px; height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        .loader-bar::before {
            content: '';
            display: block;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, #2ECC71, #00B4D8);
            animation: loaderFill 2.5s ease-out forwards;
            transform-origin: left;
        }
        @keyframes loaderFill { 0% { transform: scaleX(0); } 100% { transform: scaleX(1); } }
        .loader-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7em;
            color: #2ECC71;
            letter-spacing: 2px;
        }

        .intro-enter {
            margin-top: 35px;
            padding: 16px 45px;
            background: linear-gradient(180deg, #2ECC71 0%, #27AE60 100%);
            border: none;
            border-radius: 10px;
            font-family: 'Oswald', sans-serif;
            font-size: 1.1em;
            font-weight: 600;
            color: #000;
            letter-spacing: 4px;
            cursor: pointer;
            animation: btnAppear 1s ease 3s both;
            box-shadow: 0 6px 0 #1E8449, 0 10px 25px rgba(0,0,0,0.4), 0 0 35px rgba(46, 204, 113, 0.4);
            transition: all 0.2s ease;
        }
        @keyframes btnAppear { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .intro-enter:hover { transform: translateY(-3px); box-shadow: 0 9px 0 #1E8449, 0 15px 35px rgba(46, 204, 113, 0.5); }
        .intro-enter:active { transform: translateY(4px); box-shadow: 0 2px 0 #1E8449; }

        .intro-overlay.fade-out { animation: introOut 0.8s ease forwards; }
        @keyframes introOut { to { opacity: 0; pointer-events: none; } }

        /* ═══════════════════════════════════════════════════════════════
           MAIN APP
           ═══════════════════════════════════════════════════════════════ */
        .main-app {
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 10;
        }
        .app-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* ═══════════════════════════════════════════════════════════════
           PREMIUM HEADER WITH LAB GAUGES
           ═══════════════════════════════════════════════════════════════ */
        .lab-header {
            background: linear-gradient(180deg, rgba(20, 25, 20, 0.95) 0%, rgba(15, 15, 15, 0.9) 100%);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(46, 204, 113, 0.2);
            padding: 12px 15px;
            position: relative;
            z-index: 100;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .brand-section {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .mini-elements {
            display: flex;
            gap: 2px;
        }
        .mini-el {
            width: 28px; height: 32px;
            background: linear-gradient(160deg, #2a402a, #1a2a1a);
            border: 1px solid #3a5a3a;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1em;
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.3);
        }
        .mini-el.br { color: #A52A2A; }
        .mini-el.ba { color: #2ECC71; }
        .brand-text {
            display: flex;
            flex-direction: column;
        }
        .brand-name {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.4em;
            color: #f0f0f0;
            letter-spacing: 3px;
            line-height: 1;
        }
        .brand-sub {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6em;
            color: var(--crystal-blue);
            letter-spacing: 1px;
        }

        /* Lab Gauges in Header */
        .header-gauges {
            display: flex;
            gap: 8px;
        }
        .gauge {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .gauge-dial {
            position: relative;
            width: 42px; height: 42px;
            border-radius: 50%;
            background: linear-gradient(180deg, #1a1a1a, #0d0d0d);
            border: 2px solid #333;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.5), 0 2px 4px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .gauge-fill {
            position: absolute;
            bottom: 0; left: 0; right: 0;
            transition: height 0.5s ease;
        }
        .gauge-fill.temp { background: linear-gradient(180deg, #E74C3C, #C0392B); box-shadow: 0 0 8px rgba(231, 76, 60, 0.5); }
        .gauge-fill.pressure { background: linear-gradient(180deg, #00B4D8, #0077B6); box-shadow: 0 0 8px rgba(0, 180, 216, 0.5); }
        .gauge-fill.purity { background: linear-gradient(180deg, #2ECC71, #27AE60); box-shadow: 0 0 8px rgba(46, 204, 113, 0.5); }
        .gauge-value {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.55em;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0,0,0,0.8);
        }
        .gauge-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.5em;
            color: rgba(255,255,255,0.4);
            text-transform: uppercase;
            margin-top: 3px;
        }

        /* User Stats Row */
        .user-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: rgba(30, 30, 30, 0.6);
            backdrop-filter: blur(8px);
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .user-avatar {
            width: 38px; height: 38px;
            background: linear-gradient(135deg, var(--hazmat-yellow), var(--hazmat-yellow-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
        }
        .user-details {
            display: flex;
            flex-direction: column;
        }
        .username {
            font-family: 'Oswald', sans-serif;
            font-size: 1em;
            font-weight: 600;
            color: var(--text-primary);
        }
        .user-rank {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65em;
            color: var(--crystal-blue);
        }
        .balance-display {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.2), rgba(39, 174, 96, 0.1));
            border: 1px solid rgba(39, 174, 96, 0.3);
            border-radius: 8px;
        }
        .balance-icon { font-size: 1.2em; }
        .balance-amount {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1em;
            font-weight: 700;
            color: var(--money-green);
        }

        /* ═══════════════════════════════════════════════════════════════
           CONTENT AREA
           ═══════════════════════════════════════════════════════════════ */
        .content-area {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
            padding-bottom: calc(var(--nav-height) + 25px);
            -webkit-overflow-scrolling: touch;
        }

        .section { display: none; animation: fadeIn 0.3s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .section-header {
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .section-header h2 {
            font-family: 'Oswald', sans-serif;
            font-size: 1.2em;
            font-weight: 600;
            color: var(--hazmat-yellow);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* Filter Tabs */
        .filter-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 5px;
        }
        .filter-tabs::-webkit-scrollbar { display: none; }
        .filter-tab {
            padding: 8px 14px;
            background: rgba(30, 30, 30, 0.6);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: 'Oswald', sans-serif;
            font-size: 0.8em;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        .filter-tab:hover { background: rgba(50, 50, 50, 0.8); }
        .filter-tab.active {
            background: linear-gradient(135deg, var(--hazmat-yellow), var(--hazmat-yellow-dark));
            border-color: var(--hazmat-yellow);
            color: #000;
        }

        /* ═══════════════════════════════════════════════════════════════
           GLASSMORPHISM PRODUCT CARDS WITH 3D TILT
           ═══════════════════════════════════════════════════════════════ */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 14px;
        }

        .product-card {
            background: rgba(25, 25, 25, 0.7);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 16px;
            padding: 14px;
            position: relative;
            cursor: pointer;
            overflow: hidden;
            transform-style: preserve-3d;
            transition: transform 0.2s ease, box-shadow 0.3s ease;
            /* Layered shadows */
            box-shadow: 
                0 2px 4px rgba(0,0,0,0.2),
                0 4px 8px rgba(0,0,0,0.15),
                0 8px 16px rgba(0,0,0,0.1),
                0 16px 32px rgba(0,0,0,0.05);
        }

        .product-card:hover {
            box-shadow: 
                0 2px 4px rgba(0,0,0,0.25),
                0 4px 8px rgba(0,0,0,0.2),
                0 8px 16px rgba(0,0,0,0.15),
                0 16px 32px rgba(0,0,0,0.1),
                0 0 30px rgba(46, 204, 113, 0.15);
        }

        .product-card .tilt-shine {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 16px;
        }
        .product-card:hover .tilt-shine { opacity: 1; }

        .purity-badge {
            position: absolute;
            top: 10px; left: 10px;
            padding: 4px 10px;
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65em;
            font-weight: 700;
        }
        .purity-badge.high { background: rgba(0, 180, 216, 0.2); color: var(--crystal-blue); border: 1px solid rgba(0, 180, 216, 0.4); }
        .purity-badge.medium { background: rgba(245, 197, 24, 0.2); color: var(--hazmat-yellow); border: 1px solid rgba(245, 197, 24, 0.4); }
        .purity-badge.low { background: rgba(231, 76, 60, 0.2); color: var(--danger-red); border: 1px solid rgba(231, 76, 60, 0.4); }

        .batch-number {
            position: absolute;
            top: 10px; right: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.55em;
            color: rgba(255,255,255,0.3);
        }

        .product-image {
            width: 100%; height: 75px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.8em;
            margin: 18px 0 12px;
            position: relative;
        }
        .product-image.crystal::after {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 70px; height: 70px;
            background: radial-gradient(circle, rgba(0, 180, 216, 0.3) 0%, transparent 70%);
            border-radius: 50%;
            animation: crystalGlow 2s ease-in-out infinite;
        }
        @keyframes crystalGlow { 0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); } 50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); } }

        .product-name {
            font-family: 'Oswald', sans-serif;
            font-size: 1em;
            font-weight: 600;
            color: var(--text-primary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .product-formula {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7em;
            color: var(--crystal-blue);
            margin-bottom: 10px;
        }

        .purity-section { margin-bottom: 12px; }
        .purity-label {
            display: flex;
            justify-content: space-between;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6em;
            color: var(--text-muted);
            margin-bottom: 4px;
        }
        .purity-value { color: var(--crystal-blue); font-weight: 700; }
        .purity-bar {
            width: 100%; height: 5px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        .purity-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--crystal-blue), var(--toxic-green));
            border-radius: 3px;
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .product-price {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2em;
            font-weight: 700;
            color: var(--money-green);
        }
        .product-stock {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65em;
            color: var(--text-muted);
            padding: 3px 8px;
            background: rgba(255,255,255,0.05);
            border-radius: 4px;
        }
        .product-stock.low { color: var(--warning-orange); background: rgba(243, 156, 18, 0.1); }
        .product-stock.out { color: var(--danger-red); background: rgba(231, 76, 60, 0.1); }

        /* Add to Barrel Button */
        .add-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(180deg, var(--hazmat-yellow), var(--hazmat-yellow-dark));
            border: none;
            border-radius: 8px;
            font-family: 'Oswald', sans-serif;
            font-size: 0.85em;
            font-weight: 600;
            color: #000;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 0 #8B6914, 0 6px 15px rgba(0,0,0,0.3);
        }
        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #8B6914, 0 10px 20px rgba(0,0,0,0.3);
        }
        .add-btn:active {
            transform: translateY(3px);
            box-shadow: 0 1px 0 #8B6914;
        }
        .add-btn.added {
            background: linear-gradient(180deg, var(--lab-green), var(--money-green));
            box-shadow: 0 4px 0 #1E8449, 0 6px 15px rgba(0,0,0,0.3);
        }
        .add-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ═══════════════════════════════════════════════════════════════
           BARREL (CART) SECTION
           ═══════════════════════════════════════════════════════════════ */
        .cart-items { min-height: 200px; }
        .empty-cart {
            text-align: center;
            padding: 50px 20px;
            color: var(--text-muted);
        }
        .empty-cart .barrel-icon {
            font-size: 4em;
            display: block;
            margin-bottom: 15px;
            opacity: 0.5;
        }
        .empty-cart p {
            font-family: 'Oswald', sans-serif;
            font-size: 1.1em;
            margin-bottom: 5px;
        }
        .empty-cart .sub {
            font-style: italic;
            font-size: 0.9em;
        }

        .cart-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px;
            background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px;
            margin-bottom: 10px;
        }
        .cart-item-image { font-size: 2.2em; width: 50px; text-align: center; }
        .cart-item-info { flex: 1; }
        .cart-item-name {
            font-family: 'Oswald', sans-serif;
            font-size: 0.95em;
            color: var(--text-primary);
        }
        .cart-item-details {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7em;
            color: var(--text-muted);
        }
        .cart-item-price {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1em;
            font-weight: 700;
            color: var(--money-green);
        }
        .cart-item-remove {
            width: 30px; height: 30px;
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid rgba(231, 76, 60, 0.4);
            border-radius: 50%;
            color: var(--danger-red);
            font-size: 1em;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .cart-item-remove:hover {
            background: var(--danger-red);
            color: white;
        }

        .cart-summary {
            margin-top: 20px;
            padding: 18px;
            background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 14px;
        }
        .summary-row {
            display: flex;
            justify-content: space-between;
            font-family: 'Roboto Condensed', sans-serif;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        .summary-row.total {
            padding-top: 12px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-family: 'Oswald', sans-serif;
            font-size: 1.2em;
            color: var(--text-primary);
        }
        .summary-row.total span:last-child { color: var(--money-green); font-weight: 700; }

        .cook-order-btn {
            width: 100%;
            padding: 16px;
            margin-top: 15px;
            background: linear-gradient(180deg, var(--lab-green), var(--money-green));
            border: none;
            border-radius: 12px;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.2em;
            color: white;
            letter-spacing: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 5px 0 #1E8449, 0 8px 20px rgba(0,0,0,0.3);
        }
        .cook-order-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 0 #1E8449, 0 12px 30px rgba(46, 204, 113, 0.3);
        }
        .cook-order-btn:active {
            transform: translateY(4px);
            box-shadow: 0 1px 0 #1E8449;
        }

        /* ═══════════════════════════════════════════════════════════════
           BOTTOM NAVIGATION
           ═══════════════════════════════════════════════════════════════ */
        .bottom-nav {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            height: var(--nav-height);
            background: linear-gradient(180deg, rgba(25, 25, 25, 0.95), rgba(15, 15, 15, 0.98));
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(46, 204, 113, 0.2);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8px 18px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
        }
        .nav-icon {
            font-size: 1.4em;
            margin-bottom: 4px;
            filter: grayscale(100%) brightness(0.6);
            transition: all 0.2s ease;
        }
        .nav-label {
            font-family: 'Oswald', sans-serif;
            font-size: 0.65em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            transition: color 0.2s ease;
        }
        .nav-item:hover .nav-icon { filter: grayscale(0%) brightness(1); transform: scale(1.1); }
        .nav-item:hover .nav-label { color: var(--text-secondary); }
        .nav-item.active .nav-icon { filter: grayscale(0%) brightness(1.2); transform: scale(1.15) translateY(-2px); }
        .nav-item.active .nav-label { color: var(--hazmat-yellow); }
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 28px; height: 3px;
            background: var(--hazmat-yellow);
            border-radius: 3px;
            box-shadow: 0 0 10px var(--hazmat-yellow);
        }
        .nav-badge {
            position: absolute;
            top: 3px; right: 8px;
            min-width: 18px; height: 18px;
            background: var(--danger-red);
            border-radius: 9px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6em;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 5px;
            box-shadow: 0 0 8px var(--danger-red);
        }

        /* ═══════════════════════════════════════════════════════════════
           TOAST NOTIFICATIONS
           ═══════════════════════════════════════════════════════════════ */
        .toast {
            position: fixed;
            top: 100px; left: 50%;
            transform: translateX(-50%);
            padding: 14px 24px;
            background: rgba(25, 25, 25, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            font-family: 'Oswald', sans-serif;
            font-size: 0.9em;
            color: #fff;
            z-index: 10000;
            animation: toastIn 0.3s ease;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }
        .toast.success { border-left: 4px solid #2ECC71; }
        .toast.error { border-left: 4px solid #E74C3C; }
        @keyframes toastIn { from { opacity: 0; transform: translateX(-50%) translateY(-20px); } to { opacity: 1; transform: translateX(-50%) translateY(0); } }

        /* ═══════════════════════════════════════════════════════════════
           PARTICLE CONTAINER
           ═══════════════════════════════════════════════════════════════ */
        .particle-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9997;
            overflow: hidden;
        }
        .particle {
            position: absolute;
            pointer-events: none;
            border-radius: 50%;
            animation: particleBurst 0.8s ease-out forwards;
        }
        .particle.crystal { background: linear-gradient(135deg, #00B4D8, #0077B6); box-shadow: 0 0 6px #00B4D8; }
        .particle.green { background: linear-gradient(135deg, #2ECC71, #27AE60); box-shadow: 0 0 6px #2ECC71; }
        .particle.yellow { background: linear-gradient(135deg, #F5C518, #C9A000); box-shadow: 0 0 6px #F5C518; }
        @keyframes particleBurst {
            0% { opacity: 1; transform: translate(0, 0) scale(1); }
            100% { opacity: 0; transform: translate(var(--tx), var(--ty)) scale(0); }
        }

        /* ═══════════════════════════════════════════════════════════════
           SCREEN FLASH
           ═══════════════════════════════════════════════════════════════ */
        .screen-flash {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9996;
            opacity: 0;
        }
        .screen-flash.active { animation: flashPulse 0.15s ease-out; }
        @keyframes flashPulse { 0% { opacity: 0.4; } 100% { opacity: 0; } }

        /* ═══════════════════════════════════════════════════════════════
           SUCCESS OVERLAY
           ═══════════════════════════════════════════════════════════════ */
        .success-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(ellipse at center, rgba(0, 180, 216, 0.2) 0%, rgba(10, 10, 10, 0.98) 70%);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        .success-overlay.active { display: flex; }
        .success-crystals {
            font-size: 2.5em;
            animation: crystalBounce 0.5s ease;
            margin-bottom: 20px;
        }
        @keyframes crystalBounce { 0% { transform: scale(0); } 50% { transform: scale(1.3); } 100% { transform: scale(1); } }
        .success-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5em;
            color: var(--crystal-blue);
            text-shadow: 0 0 30px var(--crystal-blue-glow);
            letter-spacing: 5px;
        }
        .success-quote {
            font-family: 'Oswald', sans-serif;
            font-size: 1.2em;
            color: var(--text-secondary);
            margin-top: 15px;
        }
        .success-xp {
            margin-top: 20px;
            padding: 10px 25px;
            background: var(--lab-green);
            border-radius: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            color: white;
        }

        /* ═══════════════════════════════════════════════════════════════
           PROFILE SECTION
           ═══════════════════════════════════════════════════════════════ */
        .profile-content { padding: 10px 0; }
        .profile-card {
            text-align: center;
            padding: 25px;
            background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 16px;
            margin-bottom: 20px;
        }
        .profile-avatar {
            width: 80px; height: 80px;
            background: linear-gradient(135deg, var(--hazmat-yellow), var(--hazmat-yellow-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            margin: 0 auto 15px;
            box-shadow: 0 0 30px rgba(245, 197, 24, 0.3);
        }
        .profile-name {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.8em;
            letter-spacing: 3px;
        }
        .profile-rank { margin-top: 8px; }
        .rank-badge {
            display: inline-block;
            padding: 5px 15px;
            background: rgba(0, 180, 216, 0.2);
            border: 1px solid rgba(0, 180, 216, 0.4);
            border-radius: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75em;
            color: var(--crystal-blue);
        }
        .rank-stars {
            display: block;
            margin-top: 8px;
            font-size: 1.2em;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        .stat-card {
            padding: 15px 10px;
            background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px;
            text-align: center;
        }
        .stat-value {
            display: block;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5em;
            color: var(--crystal-blue);
        }
        .stat-label {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 0.7em;
            color: var(--text-muted);
        }
        .achievements-section {
            background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 18px;
        }
        .achievements-section h4 {
            font-family: 'Oswald', sans-serif;
            color: var(--hazmat-yellow);
            margin-bottom: 15px;
        }
        .achievement-list { display: flex; flex-direction: column; gap: 10px; }
        .achievement {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: rgba(40, 40, 40, 0.5);
            border-radius: 8px;
        }
        .achievement.unlocked { border-left: 3px solid var(--lab-green); }
        .achievement.locked { opacity: 0.5; border-left: 3px solid var(--text-muted); }
        .ach-icon { font-size: 1.2em; }
        .ach-name { font-family: 'Oswald', sans-serif; font-size: 0.9em; }

        /* Coming Soon */
        .coming-soon {
            text-align: center;
            color: var(--text-muted);
            padding: 60px 20px;
            font-size: 1.1em;
        }
    </style>
</head>
<body>
    <!-- Film Grain Overlay -->
    <div class="film-grain"></div>
    
    <!-- Vignette Overlay -->
    <div class="vignette"></div>
    
    <!-- Parallax Background -->
    <div class="parallax-container">
        <div class="parallax-layer smoke-deep"></div>
        <div class="parallax-layer chem-particles"></div>
        <div class="parallax-layer smoke-wisps">
            <div class="smoke-wisp"></div>
            <div class="smoke-wisp"></div>
            <div class="smoke-wisp"></div>
        </div>
        <div class="parallax-layer bubbles-layer">
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
        </div>
    </div>
    
    <!-- Particle Container -->
    <div class="particle-container"></div>
    
    <!-- Screen Flash -->
    <div class="screen-flash"></div>

    <!-- ═══════════════════════════════════════════════════════════════
         BREAKING BAD INTRO SEQUENCE
         ═══════════════════════════════════════════════════════════════ -->
    <div id="intro-overlay" class="intro-overlay">
        <div class="intro-smoke-bg"></div>
        
        <div class="intro-formulas">
            <span class="formula">C₁₀H₁₅N</span>
            <span class="formula">H₂SO₄</span>
            <span class="formula">NaOH</span>
            <span class="formula">HCl</span>
            <span class="formula">CH₃NH₂</span>
            <span class="formula">P₂O₅</span>
        </div>
        
        <div class="intro-logo">
            <div class="periodic-el br">
                <span class="num">35</span>
                <span class="sym">Br</span>
                <span class="name">Bromine</span>
            </div>
            <div class="periodic-el ba">
                <span class="num">56</span>
                <span class="sym">Ba</span>
                <span class="name">Barium</span>
            </div>
        </div>
        
        <h1 class="intro-title">HEISENBERG'S LAB</h1>
        <p class="intro-quote">"Chemistry is the study of change."</p>
        
        <div class="intro-loader">
            <div class="loader-bar"></div>
            <span class="loader-text">COOKING BATCH #4921...</span>
        </div>
        
        <button class="intro-enter" id="enter-btn">
            ⚗️ ENTER THE LAB ⚗️
        </button>
    </div>

    <!-- ═══════════════════════════════════════════════════════════════
         MAIN APP
         ═══════════════════════════════════════════════════════════════ -->
    <div id="main-app" class="main-app hidden">
        <div class="app-container">
            
            <!-- Premium Header with Lab Gauges -->
            <header class="lab-header">
                <div class="header-top">
                    <div class="brand-section">
                        <div class="mini-elements">
                            <div class="mini-el br">Br</div>
                            <div class="mini-el ba">Ba</div>
                        </div>
                        <div class="brand-text">
                            <span class="brand-name">BREAKING BAD</span>
                            <span class="brand-sub">Batch #4921 • 99.1% Pure</span>
                        </div>
                    </div>
                    
                    <!-- Lab Gauges -->
                    <div class="header-gauges">
                        <div class="gauge">
                            <div class="gauge-dial">
                                <div class="gauge-fill temp" style="height: 75%"></div>
                                <span class="gauge-value temp">185°C</span>
                            </div>
                            <span class="gauge-label">TEMP</span>
                        </div>
                        <div class="gauge">
                            <div class="gauge-dial">
                                <div class="gauge-fill pressure" style="height: 45%"></div>
                                <span class="gauge-value pressure">45psi</span>
                            </div>
                            <span class="gauge-label">PSI</span>
                        </div>
                        <div class="gauge">
                            <div class="gauge-dial">
                                <div class="gauge-fill purity" style="height: 99%"></div>
                                <span class="gauge-value purity">99.1%</span>
                            </div>
                            <span class="gauge-label">PURE</span>
                        </div>
                    </div>
                </div>
                
                <div class="user-row">
                    <div class="user-info">
                        <div class="user-avatar">👨‍🔬</div>
                        <div class="user-details">
                            <span class="username">PINKMAN</span>
                            <span class="user-rank">LVL 3 • DISTRIBUTOR</span>
                        </div>
                    </div>
                    <div class="balance-display">
                        <span class="balance-icon">💰</span>
                        <span class="balance-amount" id="user-balance">€420.69</span>
                    </div>
                </div>
            </header>

            <!-- Content Sections -->
            <main class="content-area">
                
                <!-- LAB Section -->
                <section id="section-lab" class="section active">
                    <div class="section-header">
                        <h2>📋 AVAILABLE BATCHES</h2>
                    </div>
                    <div class="filter-tabs">
                        <button class="filter-tab active" data-filter="all">ALL</button>
                        <button class="filter-tab" data-filter="crystal">💎 CRYSTAL</button>
                        <button class="filter-tab" data-filter="green">🌿 GREEN</button>
                        <button class="filter-tab" data-filter="pills">💊 PILLS</button>
                    </div>
                    <div class="product-grid" id="product-grid"></div>
                </section>

                <!-- TURF Section -->
                <section id="section-turf" class="section">
                    <div class="section-header">
                        <h2>🗺️ DISTRIBUTION TURF</h2>
                    </div>
                    <p class="coming-soon">Territory map coming soon...</p>
                </section>

                <!-- BARREL Section -->
                <section id="section-barrel" class="section">
                    <div class="section-header">
                        <h2>🛢️ YOUR BARREL</h2>
                        <span class="cart-count" id="cart-count">0 items</span>
                    </div>
                    <div class="cart-items" id="cart-items">
                        <div class="empty-cart">
                            <span class="barrel-icon">🛢️</span>
                            <p>Your barrel is empty</p>
                            <p class="sub">"No half measures."</p>
                        </div>
                    </div>
                    <div class="cart-summary" id="cart-summary" style="display: none;">
                        <div class="summary-row">
                            <span>Subtotal:</span>
                            <span id="cart-subtotal">€0.00</span>
                        </div>
                        <div class="summary-row total">
                            <span>TOTAL:</span>
                            <span id="cart-total">€0.00</span>
                        </div>
                        <button class="cook-order-btn" id="cook-order-btn">
                            🚐 COOK THE ORDER 🚐
                        </button>
                    </div>
                </section>

                <!-- PROFILE Section -->
                <section id="section-profile" class="section">
                    <div class="section-header">
                        <h2>👤 COOK PROFILE</h2>
                    </div>
                    <div class="profile-content">
                        <div class="profile-card">
                            <div class="profile-avatar">👨‍🔬</div>
                            <h3 class="profile-name">PINKMAN</h3>
                            <div class="profile-rank">
                                <span class="rank-badge">DISTRIBUTOR</span>
                                <span class="rank-stars">⭐⭐⭐☆☆</span>
                            </div>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <span class="stat-value">12</span>
                                <span class="stat-label">Total Cooks</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value">€1,247</span>
                                <span class="stat-label">Total Spent</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value">99.1%</span>
                                <span class="stat-label">Avg Purity</span>
                            </div>
                        </div>
                        <div class="achievements-section">
                            <h4>🏆 ACHIEVEMENTS</h4>
                            <div class="achievement-list">
                                <div class="achievement unlocked">
                                    <span class="ach-icon">✅</span>
                                    <span class="ach-name">First Cook</span>
                                </div>
                                <div class="achievement unlocked">
                                    <span class="ach-icon">✅</span>
                                    <span class="ach-name">Say My Name</span>
                                </div>
                                <div class="achievement locked">
                                    <span class="ach-icon">🔒</span>
                                    <span class="ach-name">Empire Builder</span>
                                </div>
                                <div class="achievement locked">
                                    <span class="ach-icon">🔒</span>
                                    <span class="ach-name">Heisenberg</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

            </main>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-item active" data-section="lab">
                <span class="nav-icon">🔬</span>
                <span class="nav-label">LAB</span>
            </div>
            <div class="nav-item" data-section="turf">
                <span class="nav-icon">🗺️</span>
                <span class="nav-label">TURF</span>
            </div>
            <div class="nav-item" data-section="barrel">
                <span class="nav-icon">🛢️</span>
                <span class="nav-label">BARREL</span>
                <span class="nav-badge" id="nav-cart-badge" style="display: none;">0</span>
            </div>
            <div class="nav-item" data-section="profile">
                <span class="nav-icon">👤</span>
                <span class="nav-label">PROFILE</span>
            </div>
        </nav>
    </div>

    <!-- Success Overlay -->
    <div id="success-overlay" class="success-overlay">
        <div class="success-crystals">💎💎💎💎💎</div>
        <h2 class="success-title">BATCH DELIVERED</h2>
        <p class="success-quote">"Yeah, Science, Bitch!"</p>
        <div class="success-xp">+50 XP</div>
    </div>

    <script>
        // ═══════════════════════════════════════════════════════════════
        // V11 - ALL FEATURES COMBINED
        // ═══════════════════════════════════════════════════════════════

        // State
        const state = {
            currentSection: 'lab',
            cart: [],
            products: [
                { id: 1, name: 'Blue Sky', formula: 'C₁₀H₁₅N', emoji: '💎', category: 'crystal', purity: 99.1, price: 80.00, stock: 12, batch: '#0042' },
                { id: 2, name: 'Chili P Special', formula: 'C₁₀H₁₅N + C₁₈H₂₇NO₃', emoji: '🌿', category: 'green', purity: 96.2, price: 45.00, stock: 8, batch: '#0038' },
                { id: 3, name: 'Madrigal Tabs', formula: 'C₂₀H₂₅N₃O', emoji: '💊', category: 'pills', purity: 91.0, price: 35.00, stock: 20, batch: '#0051' },
                { id: 4, name: 'Cap\'n Cook', formula: 'C₁₂H₁₇NO', emoji: '🍄', category: 'green', purity: 88.5, price: 55.00, stock: 3, batch: '#0029' },
                { id: 5, name: 'Los Pollos Blend', formula: 'C₁₀H₁₅N', emoji: '🐔', category: 'crystal', purity: 97.8, price: 70.00, stock: 15, batch: '#0044' },
                { id: 6, name: 'Vamonos Pest', formula: 'C₁₀H₁₅N', emoji: '🧪', category: 'crystal', purity: 95.5, price: 60.00, stock: 0, batch: '#0033' }
            ],
            user: { balance: 420.69 }
        };

        // ═══════════════════════════════════════════════════════════════
        // SOUND MANAGER
        // ═══════════════════════════════════════════════════════════════
        class SoundManager {
            constructor() {
                this.ctx = null;
                this.enabled = true;
            }
            init() {
                try { this.ctx = new (window.AudioContext || window.webkitAudioContext)(); } catch(e) {}
            }
            ensure() {
                if (!this.ctx) this.init();
                if (this.ctx?.state === 'suspended') this.ctx.resume();
            }
            playClick() {
                if (!this.enabled) return;
                this.ensure();
                if (!this.ctx) return;
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.connect(gain);
                gain.connect(this.ctx.destination);
                osc.frequency.setValueAtTime(800, this.ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(400, this.ctx.currentTime + 0.05);
                gain.gain.setValueAtTime(0.1, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.05);
                osc.start();
                osc.stop(this.ctx.currentTime + 0.05);
            }
            playSuccess() {
                if (!this.enabled) return;
                this.ensure();
                if (!this.ctx) return;
                [523.25, 659.25, 783.99].forEach((freq, i) => {
                    setTimeout(() => {
                        const osc = this.ctx.createOscillator();
                        const gain = this.ctx.createGain();
                        osc.connect(gain);
                        gain.connect(this.ctx.destination);
                        osc.frequency.setValueAtTime(freq, this.ctx.currentTime);
                        gain.gain.setValueAtTime(0.15, this.ctx.currentTime);
                        gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.3);
                        osc.start();
                        osc.stop(this.ctx.currentTime + 0.3);
                    }, i * 100);
                });
            }
        }
        const sound = new SoundManager();

        // ═══════════════════════════════════════════════════════════════
        // PARTICLE BURST
        // ═══════════════════════════════════════════════════════════════
        function particleBurst(x, y, count = 12) {
            const container = document.querySelector('.particle-container');
            const colors = ['crystal', 'green', 'yellow'];
            for (let i = 0; i < count; i++) {
                const p = document.createElement('div');
                const color = colors[Math.floor(Math.random() * colors.length)];
                const size = 4 + Math.random() * 8;
                const angle = Math.random() * Math.PI * 2;
                const dist = 30 + Math.random() * 80;
                const tx = Math.cos(angle) * dist;
                const ty = Math.sin(angle) * dist - 30;
                p.className = `particle ${color}`;
                p.style.cssText = `left:${x}px;top:${y}px;width:${size}px;height:${size}px;--tx:${tx}px;--ty:${ty}px;`;
                container.appendChild(p);
                setTimeout(() => p.remove(), 800);
            }
        }

        // ═══════════════════════════════════════════════════════════════
        // SCREEN FLASH
        // ═══════════════════════════════════════════════════════════════
        function screenFlash(color = '#2ECC71') {
            const flash = document.querySelector('.screen-flash');
            flash.style.background = color;
            flash.classList.add('active');
            setTimeout(() => flash.classList.remove('active'), 150);
        }

        // ═══════════════════════════════════════════════════════════════
        // HAPTIC FEEDBACK
        // ═══════════════════════════════════════════════════════════════
        function haptic(type = 'light') {
            if ('vibrate' in navigator) {
                const patterns = { light: 10, medium: 25, heavy: 50, success: [30, 50, 30] };
                navigator.vibrate(patterns[type] || 10);
            }
        }

        // ═══════════════════════════════════════════════════════════════
        // 3D TILT EFFECT
        // ═══════════════════════════════════════════════════════════════
        function initTilt(card) {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const tiltX = ((y - centerY) / centerY) * 8;
                const tiltY = ((x - centerX) / centerX) * -8;
                card.style.transform = `perspective(1000px) rotateX(${tiltX}deg) rotateY(${tiltY}deg) scale(1.02)`;
                const shine = card.querySelector('.tilt-shine');
                if (shine) {
                    shine.style.background = `radial-gradient(circle at ${(x/rect.width)*100}% ${(y/rect.height)*100}%, rgba(255,255,255,0.15) 0%, transparent 50%)`;
                }
            });
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)';
            });
        }

        // ═══════════════════════════════════════════════════════════════
        // LAB GAUGES ANIMATION
        // ═══════════════════════════════════════════════════════════════
        const gaugeValues = { temp: 75, pressure: 45, purity: 99.1 };
        function animateGauges() {
            setInterval(() => {
                gaugeValues.temp = Math.max(60, Math.min(95, gaugeValues.temp + (Math.random() - 0.5) * 8));
                gaugeValues.pressure = Math.max(30, Math.min(70, gaugeValues.pressure + (Math.random() - 0.5) * 6));
                gaugeValues.purity = Math.max(95, Math.min(100, gaugeValues.purity + (Math.random() - 0.5) * 0.5));
                
                document.querySelector('.gauge-fill.temp').style.height = gaugeValues.temp + '%';
                document.querySelector('.gauge-fill.pressure').style.height = gaugeValues.pressure + '%';
                document.querySelector('.gauge-fill.purity').style.height = gaugeValues.purity + '%';
                
                document.querySelector('.gauge-value.temp').textContent = Math.round(gaugeValues.temp * 2.5) + '°C';
                document.querySelector('.gauge-value.pressure').textContent = Math.round(gaugeValues.pressure) + 'psi';
                document.querySelector('.gauge-value.purity').textContent = gaugeValues.purity.toFixed(1) + '%';
            }, 2000);
        }

        // ═══════════════════════════════════════════════════════════════
        // TOAST
        // ═══════════════════════════════════════════════════════════════
        function showToast(msg, type = 'success') {
            document.querySelectorAll('.toast').forEach(t => t.remove());
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = msg;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(-50%) translateY(-20px)';
                setTimeout(() => toast.remove(), 300);
            }, 2000);
        }

        // ═══════════════════════════════════════════════════════════════
        // INTRO
        // ═══════════════════════════════════════════════════════════════
        document.getElementById('enter-btn').addEventListener('click', () => {
            sound.playSuccess();
            haptic('heavy');
            const intro = document.getElementById('intro-overlay');
            intro.classList.add('fade-out');
            setTimeout(() => {
                intro.style.display = 'none';
                document.getElementById('main-app').classList.remove('hidden');
            }, 800);
        });

        // ═══════════════════════════════════════════════════════════════
        // NAVIGATION
        // ═══════════════════════════════════════════════════════════════
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                const section = item.dataset.section;
                sound.playClick();
                haptic('light');
                document.querySelectorAll('.nav-item').forEach(n => n.classList.toggle('active', n.dataset.section === section));
                document.querySelectorAll('.section').forEach(s => s.classList.toggle('active', s.id === `section-${section}`));
                state.currentSection = section;
            });
        });

        // ═══════════════════════════════════════════════════════════════
        // FILTER TABS
        // ═══════════════════════════════════════════════════════════════
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                sound.playClick();
                document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const filter = tab.dataset.filter;
                const filtered = filter === 'all' ? state.products : state.products.filter(p => p.category === filter);
                renderProducts(filtered);
            });
        });

        // ═══════════════════════════════════════════════════════════════
        // RENDER PRODUCTS
        // ═══════════════════════════════════════════════════════════════
        function renderProducts(products = state.products) {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = products.map(p => {
                const purityClass = p.purity >= 95 ? 'high' : p.purity >= 85 ? 'medium' : 'low';
                const stockClass = p.stock === 0 ? 'out' : p.stock <= 5 ? 'low' : '';
                const stockText = p.stock === 0 ? 'SOLD OUT' : p.stock + ' left';
                const imageClass = p.category === 'crystal' ? 'crystal' : '';
                return `
                    <div class="product-card" data-id="${p.id}">
                        <div class="tilt-shine"></div>
                        <span class="purity-badge ${purityClass}">${p.purity}%</span>
                        <span class="batch-number">BATCH ${p.batch}</span>
                        <div class="product-image ${imageClass}">${p.emoji}</div>
                        <div class="product-name">${p.name}</div>
                        <div class="product-formula">${p.formula}</div>
                        <div class="purity-section">
                            <div class="purity-label">
                                <span>PURITY</span>
                                <span class="purity-value">${p.purity}%</span>
                            </div>
                            <div class="purity-bar">
                                <div class="purity-fill" style="width: ${p.purity}%"></div>
                            </div>
                        </div>
                        <div class="product-footer">
                            <span class="product-price">€${p.price.toFixed(2)}</span>
                            <span class="product-stock ${stockClass}">${stockText}</span>
                        </div>
                        <button class="add-btn" data-id="${p.id}" ${p.stock === 0 ? 'disabled' : ''}>
                            ${p.stock > 0 ? '🛢️ ADD TO BARREL' : 'UNAVAILABLE'}
                        </button>
                    </div>
                `;
            }).join('');
            
            // Init tilt and click handlers
            grid.querySelectorAll('.product-card').forEach(card => {
                initTilt(card);
            });
            
            grid.querySelectorAll('.add-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const id = parseInt(btn.dataset.id);
                    addToCart(id, e);
                });
            });
        }

        // ═══════════════════════════════════════════════════════════════
        // CART FUNCTIONS
        // ═══════════════════════════════════════════════════════════════
        function addToCart(productId, event) {
            const product = state.products.find(p => p.id === productId);
            if (!product || product.stock <= 0) return;
            
            const existing = state.cart.find(item => item.id === productId);
            if (existing) {
                existing.quantity++;
            } else {
                state.cart.push({ ...product, quantity: 1 });
            }
            
            // Effects
            sound.playSuccess();
            haptic('success');
            screenFlash('#2ECC71');
            
            // Particle burst at button location
            if (event) {
                const rect = event.target.getBoundingClientRect();
                particleBurst(rect.left + rect.width / 2, rect.top + rect.height / 2, 15);
            }
            
            updateCartBadge();
            renderCart();
            showToast(`${product.name} added to barrel!`, 'success');
        }

        function removeFromCart(productId) {
            state.cart = state.cart.filter(item => item.id !== productId);
            sound.playClick();
            updateCartBadge();
            renderCart();
        }

        function updateCartBadge() {
            const badge = document.getElementById('nav-cart-badge');
            const count = document.getElementById('cart-count');
            const total = state.cart.reduce((sum, item) => sum + item.quantity, 0);
            badge.textContent = total;
            badge.style.display = total > 0 ? 'flex' : 'none';
            count.textContent = `${total} item${total !== 1 ? 's' : ''}`;
        }

        function renderCart() {
            const cartItems = document.getElementById('cart-items');
            const cartSummary = document.getElementById('cart-summary');
            
            if (state.cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="empty-cart">
                        <span class="barrel-icon">🛢️</span>
                        <p>Your barrel is empty</p>
                        <p class="sub">"No half measures."</p>
                    </div>
                `;
                cartSummary.style.display = 'none';
                return;
            }
            
            cartItems.innerHTML = state.cart.map(item => `
                <div class="cart-item">
                    <div class="cart-item-image">${item.emoji}</div>
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-details">${item.purity}% pure • Qty: ${item.quantity}</div>
                    </div>
                    <div class="cart-item-price">€${(item.price * item.quantity).toFixed(2)}</div>
                    <button class="cart-item-remove" onclick="removeFromCart(${item.id})">✕</button>
                </div>
            `).join('');
            
            const subtotal = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartSummary.style.display = 'block';
            document.getElementById('cart-subtotal').textContent = `€${subtotal.toFixed(2)}`;
            document.getElementById('cart-total').textContent = `€${subtotal.toFixed(2)}`;
        }

        // Cook order
        document.getElementById('cook-order-btn').addEventListener('click', () => {
            if (state.cart.length === 0) return;
            
            const overlay = document.getElementById('success-overlay');
            overlay.classList.add('active');
            sound.playSuccess();
            haptic('success');
            
            // Multiple particle bursts
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    particleBurst(
                        window.innerWidth / 2 + (Math.random() - 0.5) * 200,
                        window.innerHeight / 2 + (Math.random() - 0.5) * 200,
                        20
                    );
                }, i * 200);
            }
            
            state.cart = [];
            updateCartBadge();
            renderCart();
            
            setTimeout(() => {
                overlay.classList.remove('active');
                document.querySelectorAll('.nav-item').forEach(n => n.classList.toggle('active', n.dataset.section === 'lab'));
                document.querySelectorAll('.section').forEach(s => s.classList.toggle('active', s.id === 'section-lab'));
            }, 3000);
        });

        // Global functions
        window.removeFromCart = removeFromCart;

        // ═══════════════════════════════════════════════════════════════
        // INIT
        // ═══════════════════════════════════════════════════════════════
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🧪 V11 Ultimate Experience Loading...');
            renderProducts();
            animateGauges();
            document.getElementById('user-balance').textContent = `€${state.user.balance.toFixed(2)}`;
            console.log('✅ V11 Ready!');
        });
    </script>
</body>
</html>

